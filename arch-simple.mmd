flowchart TB
    subgraph User[User]
        MIC[Microphone]
        SYS[System Audio]
    end
    
    subgraph Main[Electron Main Process]
        GW[Ghost Window Manager]
        AC[Audio Capture]
        WS[Gemini WebSocket]
        IPC[IPC Bridge]
    end
    
    subgraph Renderer[Renderer Process]
        NP[NotesParser]
        RAG[RAG Engine]
        UI[AssistantView UI]
    end
    
    subgraph Storage[Local Storage]
        EMB[(Embeddings)]
        SESS[(Sessions)]
    end
    
    subgraph External[Google Gemini API]
        AUDIO[Audio Stream]
        EMBED[Embeddings API]
    end
    
    subgraph Output[Output]
        VIS[Visible Response]
        SILENT[Silent Notes]
        DOCX[DOCX Export]
    end

    MIC --> AC
    SYS --> AC
    AC --> WS
    WS <--> AUDIO
    RAG <--> EMBED
    RAG --> EMB
    
    GW -.-> UI
    IPC <--> NP
    IPC <--> UI
    WS --> IPC
    
    NP --> VIS
    NP --> SILENT
    SILENT --> SESS
    SESS --> DOCX
    VIS --> UI
